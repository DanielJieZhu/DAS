#from DAS.web.utils import quote
#set base = $quote($base)
<!-- das_searchform.tmpl -->
<link type="text/css" rel="stylesheet" href="$base/yui/build/autocomplete/assets/skins/sam/autocomplete.css">
<script src="$base/yui/build/datasource/datasource-min.js"></script>
<script src="$base/yui/build/connection/connection-min.js"></script>
<script src="$base/yui/build/cookie/cookie-min.js"></script>
<script src="$base/yui/build/json/json-min.js"></script>
<script src="$base/yui/build/autocomplete/autocomplete-min.js"></script>

<form action="$base/request" method="get">
<table>
<tr>
<td class="right">
data in
<select id="view" name="view">
<option class="sand" value="list">list</option>
<option class="sand" value="filter">filter</option>
<option class="sand" value="table">table</option>
<option class="sand" value="json">json</option>
<option class="sand" value="xml">xml</option>
</select>
format,
</td>
<td class="left">
&nbsp;
<select id="limit" name="limit">
<option class="sand" value="10">10</option>
<option class="sand" value="25">25</option>
<option class="sand" value="50">50</option>
<option class="sand" value="100">100</option>
<!--
<option value="0">All</option>
-->
</select>
results/page,
</td>
<td class="right">
&nbsp; 
records in
<select id="show" name="show">
<option class="sand" value="json">browseable</option>
<option class="sand" value="code">code</option>
<option class="sand" value="yaml">plain</option>
</select>
format,
</td>
<td class="right">
&nbsp;
autocompletion
<select id="ac_enable" onChange="ac_select_change();">
<option class="sand" value="true">enable</option>
<option class="sand" value="false">disable</option>
</select>
</td>
<td class="right">
&nbsp;
<input type="submit" value="Search" class="btn borders" />
<input type="reset" class="btn borders" />
</td>
</tr>
</table>
<div class="autocomplete">
<input type="text" name="input" id="input" style="width:100%;"/>
<div id="ac_container"></div>
</div>
##<input type="submit" value="Search" />
##<input type="reset" />
</form>
<div class="right">
<img src="$base/images/mongodb_logo.png" alt="Powered by MongoDB" width="5%" />
</div>
<!--
<p></p>
-->

<script type="application/javascript">
updateInput();

ac = null;
ac_datasrc = null;

function set_autocomplete(enable) {
	if (enable) {
		ac_datasrc = new YAHOO.util.XHRDataSource("$base/autocomplete");
		ac_datasrc.responseType = YAHOO.util.XHRDataSource.TYPE_JSARRAY;
		ac_datasrc.responseSchema = { fields: ["value", "css", "info"]};
		ac = new YAHOO.widget.AutoComplete("input", "ac_container", ac_datasrc);
		ac.animVert = false;
		ac.animHoriz = false;
		ac.maxResultsDisplayed = 10;
		ac.minQueryLength = 4;
		ac.queryDelay = 0.5;
		ac.autoHighlight = false;
		ac.forceSelection = false;
		ac.typeAhead = false;
		ac.useShadow = true;
		ac.resultTypeList = false;
		ac.formatResult = function(oResultData, sQuery, sResultMatch) {
			var markup = ["<div style='position:relative;padding:0'>",
						  "<div class='", oResultData.css, 
						  "'></div><div><span class='ac-suggest'>",
						  sResultMatch, "</span><span class='ac-extra'>", 
						  oResultData.info, "</span></div></div>"];
			return (markup.join(" "));
		};
		ac.applyLocalFilter = false;
		ac.queryMatchContains = false;
	} else {
		if (! (ac === undefined || ac === null)) {
			ac.destroy();
			ac = null;
			ac_datasrc = null;
		}
	}
};

function ac_select_change() {
	var enable = (\$("ac_enable").value == "true");
	set_autocomplete(enable);
	YAHOO.util.Cookie.set("autocomplete", enable);	
};

var initial_status = (YAHOO.util.Cookie.get("autocomplete") != "false"); 

if (initial_status) { 
	set_autocomplete(initial_status);
	\$("ac_enable").value = "true";
} else {
	\$("ac_enable").value = "false";
}

</script>
<!-- end of das_searchform.tmpl -->

<div id="_response" class="results"> <!-- we close this tag in das_bottom.tmpl -->

