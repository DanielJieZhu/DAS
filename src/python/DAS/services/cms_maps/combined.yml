# Combined API Mapping to DAS
system : combined
format : JSON
services : {
    "dbs": "http://cmsdbsprod.cern.ch/cms_dbs_prod_global/servlet/DBSServlet",
    "dbs3": "https://cmsweb.cern.ch/dbs/prod/global/DBSReader",
    "phedex": "https://cmsweb.cern.ch/phedex/datasvc/json/prod",
    "conddb": "https://cms-conddb.cern.ch",
}
---
urn : combined_dataset4site_release
url : "http://localhost:8212/dbs_phedex"
expire : 3600
params : {
     "release":"required", "site":"required"
}
daskeys : [
    {"key":"dataset", "map":"dataset.name", "pattern":""},
    {"key":"release", "map":"release.name", "pattern":""},
    {"key":"site", "map":"site.name", "pattern":"^T[0-3]_"},
    {"key":"site", "map":"site.se", "pattern":"([a-zA-Z0-9-_]+\\.){2}"},
]
das2api : [
    {"das_key":"site.name", "api_param":"site", "pattern":""},
    {"das_key":"site.se", "api_param":"site", "pattern":""},
    {"das_key":"release.name", "api_param":"release", "pattern":""},
]
---
urn : combined_dataset4site
url : "http://localhost:8212/dbs_phedex/dataset"
expire : 3600
params : {
     "site":"required"
}
daskeys : [
    {"key":"dataset", "map":"dataset.name", "pattern":""},
    {"key":"site", "map":"site.name", "pattern":"^T[0-3]_"},
    {"key":"site", "map":"site.se", "pattern":"([a-zA-Z0-9-_]+\\.){2}"},
]
das2api : [
    {"das_key":"site.name", "api_param":"site", "pattern":""},
    {"das_key":"site.se", "api_param":"site", "pattern":""},
]
---
urn : combined_site4dataset
url : "http://localhost:8212/dbs_phedex"
expire : 3600
params : {
     "dataset":"required"
}
daskeys : [
    {"key":"site", "map":"site.name", "pattern":"^T[0-3]_"},
    {"key":"dataset", "map":"dataset.name", "pattern":""},
]
das2api : [
    {"das_key":"site.name", "api_param":"site", "pattern":""},
    {"das_key":"dataset.name", "api_param":"dataset", "pattern":""},
]
---
urn : combined_lumi4dataset
url : "http://localhost:8212/dbs_lumi/lumi"
format : JSON
expire : 3600
params : {
     "dataset":"required"
}
daskeys : [
    {"key":"lumi", "map":"lumi.runlumis", "pattern":""},
    {"key":"dataset", "map":"dataset.name", "pattern":""},
]
das2api : [
    {"das_key":"dataset.name", "api_param":"dataset", "pattern":""},
]
