# DBS2 API Mapping to DAS
system : dbs
format : XML
---
urn : listBlocks
url : "http://cmsdbsprod.cern.ch/cms_dbs_prod_global/servlet/DBSServlet"
expire : 3600
params : {
     "api":"listBlocks", "apiversion": "DBS_2_0_8", "block_name":"*",
     "storage_elemennt_name": "*", "user_type":"NORMAL"
}
daskeys : [
    {"key":"block", "map":"block.name", "pattern":""}
]
das2api : [
    {"das_key":"block.name", "api_param":"block_name", "pattern":""},
    {"das_key":"site.name", "api_param":"storage_element_name",
     "pattern":"re.compile('^T[0-3]_')"},
    {"das_key":"site.se", "api_param":"storage_element_name",
     "pattern":"re.compile('([a-zA-Z0-9]+\\.){2}')"}
]
---
urn : listFiles
url : "http://cmsdbsprod.cern.ch/cms_dbs_prod_global/servlet/DBSServlet"
expire : 3600
params: {
    "api" : "listFiles", "apiversion" : "DBS_2_0_8", "path" : "",
    "primary_dataset": "", "processed_dataset" : "", "data_tier_list" : "",
    "analysis_dataset_name" : "", "block_name" : "", "other_details" : True,
    "run_number" : "", "pattern_lfn": "", "detail" : True, "retrive_list" : "" }
daskeys : [
        {"key": "file", "map": "file.name", "pattern":""}
]
das2api : [
        {"das_key": "dataset", "api_param": "path", "pattern":""},
        {"das_key": "block.name", "api_param": "block_name", "pattern":""},
        {"das_key": "run", "api_param": "run_number", "pattern":""},
        {"das_key": "file.name", "api_param": "pattern_lfn", "pattern":""},
]
---
notations : [
    {"notation":"creation_date", "map":"creation_time", "api":""},
    {"notation":"last_modification_date", "map":"modification_time", "api":""},
    {"notation":"app_family_name", "map":"name", "api":""},
    {"notation":"app_executable_name", "map":"executable", "api":""},
    {"notation":"storage_element", "map":"se", "api":""},
    {"notation":"storage_element_name", "map":"se", "api":""},
    {"notation":"number_of_files", "map":"nfiles", "api":""},
    {"notation":"number_of_events", "map":"nevents", "api":""},
    {"notation":"number_of_blocks", "map":"nblocks", "api":""},
    {"notation":"number_of_lumi_sections", "map":"nlumis", "api":""},
    {"notation":"lumi_section_number", "map":"lumi", "api":""},
    {"notation":"start_event_number", "map":"start_event", "api":""},
    {"notation":"end_event_number", "map":"end_event", "api":""},
    {"notation":"total_luminosity", "map":"totlumi", "api":""},
    {"notation":"total_size", "map":"size", "api":""},
    {"notation":"lfn", "map":"name", "api":""},
    {"notation":"processed_dataset", "map":"dataset", "api":""},
]


