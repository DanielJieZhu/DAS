# DBS3 API mapping to DAS
system : dbs3
format : JSON
---
urn: acquisitioneras
url : "http://localhost:8585/DBS/acquisitioneras/"
expire : 3600
params : {}
daskeys : [
        {"key": "era", "map":"era", "pattern":""},
]
---
# Flow
# input: primary_ds
# converted into: primary_ds_name <== this is what we look-up, it is daskey
# need to convert daskey into input parameter (done by das2api) 
# primary_ds_name ==> primary_ds_name
# what is missing is when das2api query api2das-mapping and this mapping doesn't exist
#
urn: primarydatasets
url : "http://localhost:8585/DBS/primarydatasets/"
expire : 3600
params : {
        "primary_ds_name":"*",
}
daskeys : [
        {"key": "primary_ds", "map":"primary_ds.name", "pattern":""},
]
#api2das : [
#        {"api_param": "primary_ds_name", "das_key":"primary_ds", "pattern":""},
#]
---
urn: datasets
url : "http://localhost:8585/DBS/datasets/"
expire : 3600
params : {
        "dataset":"*",
        "datasetparent":"*",
        "app_name":"*",
        "version":"*",
        "hash":"*",
        "output_module_lavel":"*"
}
daskeys : [
        {"key": "dataset", "map":"dataset.name", "pattern":""},
        {"key": "type", "map":"datasettype", "pattern":""},
        {"key": "group", "map":"physicsgroup", "pattern":""},
        {"key": "tag", "map":"globaltag", "pattern":""},
        {"key": "c_section", "map":"xtcrosssection", "pattern":""},
]
---
urn: blocks
url : "http://localhost:8585/DBS/blocks/"
expire : 3600
params : {}
daskeys : [
        {"key": "block", "map":"block.name", "pattern":""},
]
---
notations : [
        {"notation": "dataset", "map": "name", "api": ""},
        {"notation": "primary_ds_name", "map": "name", "api": ""},
]
