# PhEDEx API mapping to DAS
system : phedex
format : XML
---
urn : blockReplicas
url : "http://cmsweb.cern.ch/phedex/datasvc/xml/prod/blockReplicas"
expire : 3600
params : {"se":"*", "block":"*", "node":"*"}
daskeys : [
        {"key":"block", "map":"block.name", "pattern":""},
#        {"key":"file", "map":"file.name", "pattern":""},
]
api2das : [
        {"api_param":"block", "das_key":"block.name", "pattern":""},
        {"api_param":"node", "das_key":"site.name", "pattern":"re.compile('^T[0-3]_')"},
        {"api_param":"se", "das_key":"site.se", "pattern":"re.compile('([a-zA-Z0-9]+\\.){2}')"},
]
---
urn : fileReplicas
url : "http://cmsweb.cern.ch/phedex/datasvc/xml/prod/fileReplicas"
expire : 3600
params : {"se":"*", "block":"required", "node":"*"}
daskeys : [
        {"key":"file", "map":"file.name", "pattern":""},
        {"key":"block", "map":"block.name", "pattern":""},
]
api2das : [
        {"api_param":"node", "das_key":"site", "pattern":"re.compile('^T[0-3]_')"},
        {"api_param":"node", "das_key":"site.name", "pattern":"re.compile('^T[0-3]_')"},
        {"api_param":"se", "das_key":"site", "pattern":"re.compile('([a-zA-Z0-9]+\\.){2}')"},
        {"api_param":"se", "das_key":"site.se", "pattern":"re.compile('([a-zA-Z0-9]+\\.){2}')"},
]
---
urn : nodes
url : "http://cmsweb.cern.ch/phedex/datasvc/xml/prod/nodes"
expire : 3600
params : {"node":"*", "noempty":""}
daskeys : [{"key":"site", "map":"site.name", "pattern":"re.compile('^T[0-3]_')"}]
api2das : [
        {"api_param":"node", "das_key":"site", "pattern":"re.compile('^T[0-3]_')"},
        {"api_param":"node", "das_key":"site.name", "pattern":"re.compile('^T[0-3]_')"},
]
---
urn : lfn2pfn
url : "http://cmsweb.cern.ch/phedex/datasvc/xml/prod/lfn2pfn"
expire : 3600
params : {"node":"required", "lfn":"required", "destination":"", "protocol":"srmv2"}
daskeys : [{"key":"pfn", "map":"file.name", "pattern":""}]
api2das : [
        {"api_param":"node", "das_key":"site", "pattern":"re.compile('^T[0-3]_')"},
        {"api_param":"node", "das_key":"site.name", "pattern":"re.compile('^T[0-3]_')"},
        {"api_param":"lfn", "das_key":"file", "pattern":""},
]
---
notations : [
    {"notation":"time_create", "map":"creation_time", "api":""},
    {"notation":"time_update", "map":"modification_time", "api":""},
    {"notation":"bytes", "map":"size", "api":""},
    {"notation":"node", "map":"site", "api":""},
    {"notation":"files", "map":"nfiles", "api":""},
    {"notation":"events", "map":"nevents", "api":""},
    {"notation":"lfn", "map":"name", "api":""},
    {"notation":"node", "map":"site", "api":""},
]

