# SiteDB API mapping to DAS
#---
# NOT READY
#api : status
#params : 
#    name : 'T%'
#record :
#    daskeys :
#        - key :
#          map :
#          pattern : ''
#    api2das :
#        - api_param : name
#          das_key : site
#          pattern : "re.compile('^T[0-3]')"
##### This was commented out
#        - api_param : name
#          das_key : site
#          pattern : "re.compile('([a-zA-Z0-9]+\\.){2}')"
--- 
api : resource_element
params : 
    name : 'T%'
    type : '%'
record :
    daskeys :
        - key : site
          map : site.name
          pattern : "re.compile('^T[0-3]')"
#        - key : site
#          map : site.resource_element.fqdn
#          pattern : "re.compile('([a-zA-Z0-9]+\\.){2}')"
    api2das :
        - api_param : name
          das_key : site
          pattern : "re.compile('^T[0-3]')"
        - api_param : type
          das_key : site.type
          pattern : ''
--- 
api : resource_pledge
params : 
    name : 'T%'
#    quarter : '%'
record :
    daskeys :
        - key : site
          map : site.name
          pattern : "re.compile('^T[0-3]')"
    api2das :
        - api_param : name
          das_key : site
          pattern : "re.compile('^T[0-3]')"
#---
# NOT READY
#api : names
#params : 
#    name : 'T%'
#    scheme : cms_name
#record :
#    daskeys :
#        - key :
#          map :
#          pattern : ''
#    api2das :
#        - api_param : name
#          das_key : site
#          pattern : "re.compile('^T[0-3]')"
---
api : links
params : 
    name : 'T%'
record :
    daskeys :
        - key : url
          map : site.url
          pattern : ''
    api2das :
        - api_param : name
          das_key : site
          pattern : "re.compile('^T[0-3]')"
#---
#NOT READY
#api : groups
#params : 
#    name : 'T%'
#record :
#    daskeys :
#        - key :
#          map :
#          pattern : ''
#    api2das :
#        - api_param : name
#          das_key : site
#          pattern : "re.compile('^T[0-3]')"
---
api : contacts
params : 
    name : 'T%'
#    role : '%'
record :
    daskeys :
        - key : admin
          map : site.email
          pattern : 're.compile("[A-Z0-9._%-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}", re.IGNORECASE)'
        - key : role
          map : site.role
          pattern : ''
        - key : phone
          map : site.phone
          pattern : ''
        - key : surname
          map : site.surname
          pattern : ''
        - key : site
          map : site.name
          pattern : "re.compile('^T[0-3]')"
    api2das :
        - api_param : name
          das_key : site
          pattern : "re.compile('^T[0-3]')"
#---
# NOT READY
#api : pledge_history
#params : 
#    name : 'T%'
#record :
#    daskeys :
#        - key :
#          map :
#          pattern :
#    api2das :
#        - api_param : name
#          das_key : site
#          pattern : "re.compile('^T[0-3]')"
---
# list API provides information about given name, e.g. T1_CH
# output includes site_name, url, country, usage, cms_name
api : list
params : 
    name : 'T%'
    scheme : cms_name
record :
    daskeys :
        - key : country
          map : site.country
          pattern : ''
        - key : site
          map : site.name
          pattern : "re.compile('^T[0-3]')"
        - key : url
          map : site.url
          pattern : ''
    api2das :
        - api_param : name
          das_key : site
          pattern : "re.compile('^T[0-3]')"
#---
#api : software
#params : 
#    name : 'T%'
#record :
#    daskeys :
#        - key :
#          map :
#          pattern :
#    api2das :
#        - api_param : name
#          das_key : site
#          pattern : "re.compile('^T[0-3]')"
