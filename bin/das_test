#!/bin/sh
tests=`find test -name "*_t.py"`
for t in $tests
do
    cmgrcache=`echo $t | grep das_cache_t`
    cmgrprocess=`ps auxww | grep "das_server.py --server=cache" | grep -v grep`
    if [ "$cmgrcache" != "" ] && [ "$cmgrprocess" == "" ]; then
        echo "No das_cacheserver process found"
        echo "Skip test $t"
    else
        echo $t | \
        awk '{print "echo; echo \"running unit tests for "$0"\"; python "$0""}'|\
        /bin/sh
    fi
done; 
